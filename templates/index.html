<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netlify AI Deploy Studio</title>
    <style>
        :root {
            --bg-primary: #1e1e2e;
            --bg-secondary: #181825;
            --bg-tertiary: #11111b;
            --bg-hover: #313244;
            --border-color: #313244;
            --text-primary: #cdd6f4;
            --text-secondary: #a6adc8;
            --text-muted: #6c7086;
            --accent-primary: #89b4fa;
            --accent-secondary: #a6e3a1;
            --accent-warning: #f9e2af;
            --accent-error: #f38ba8;
            --accent-gradient: linear-gradient(135deg, #89b4fa, #a6e3a1);
        }

        [data-theme="purple"] {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f0f1a;
            --bg-hover: #2d2d5a;
            --border-color: #2d2d5a;
            --accent-primary: #a855f7;
            --accent-secondary: #06b6d4;
            --accent-gradient: linear-gradient(135deg, #a855f7, #06b6d4);
        }

        [data-theme="hacker"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #0d1117;
            --bg-tertiary: #000000;
            --bg-hover: #1a1a1a;
            --border-color: #30363d;
            --text-primary: #00ff00;
            --text-secondary: #00cc00;
            --text-muted: #006600;
            --accent-primary: #00ff00;
            --accent-secondary: #00ffff;
            --accent-gradient: linear-gradient(135deg, #00ff00, #00ffff);
        }

        [data-theme="sunset"] {
            --bg-primary: #1f1315;
            --bg-secondary: #170f10;
            --bg-tertiary: #0f0a0b;
            --bg-hover: #3d2427;
            --border-color: #3d2427;
            --accent-primary: #ff6b6b;
            --accent-secondary: #feca57;
            --accent-gradient: linear-gradient(135deg, #ff6b6b, #feca57);
        }

        [data-theme="ocean"] {
            --bg-primary: #0f172a;
            --bg-secondary: #0c1222;
            --bg-tertiary: #070b14;
            --bg-hover: #1e293b;
            --border-color: #1e293b;
            --accent-primary: #38bdf8;
            --accent-secondary: #34d399;
            --accent-gradient: linear-gradient(135deg, #38bdf8, #34d399);
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #e8e8e8;
            --bg-hover: #e0e0e0;
            --border-color: #d0d0d0;
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-muted: #8a8a8a;
            --accent-primary: #2563eb;
            --accent-secondary: #16a34a;
            --accent-gradient: linear-gradient(135deg, #2563eb, #16a34a);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        .ide-container {
            display: grid;
            grid-template-rows: 40px 1fr 180px 24px;
            grid-template-columns: 240px 1fr 280px;
            height: 100vh;
            gap: 1px;
            background: var(--border-color);
        }

        /* ===== æ¨™é¡Œæ¬„ ===== */
        .titlebar {
            grid-column: 1 / -1;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            user-select: none;
        }

        .titlebar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .titlebar-logo {
            font-size: 13px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .titlebar-menu {
            display: flex;
            gap: 2px;
        }

        .titlebar-menu button {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 6px 10px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
        }

        .titlebar-menu button:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .theme-selector {
            display: flex;
            gap: 6px;
        }

        .theme-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }

        .theme-dot:hover { transform: scale(1.2); }
        .theme-dot.active { border-color: var(--text-primary); }

        .theme-dot[data-theme="default"] { background: linear-gradient(135deg, #89b4fa, #a6e3a1); }
        .theme-dot[data-theme="purple"] { background: linear-gradient(135deg, #a855f7, #06b6d4); }
        .theme-dot[data-theme="hacker"] { background: linear-gradient(135deg, #00ff00, #00ffff); }
        .theme-dot[data-theme="sunset"] { background: linear-gradient(135deg, #ff6b6b, #feca57); }
        .theme-dot[data-theme="ocean"] { background: linear-gradient(135deg, #38bdf8, #34d399); }
        .theme-dot[data-theme="light"] { background: linear-gradient(135deg, #fff, #ddd); border: 1px solid #ccc; }

        /* ===== å´é‚Šæ¬„ ===== */
        .sidebar {
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .project-selector {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .project-input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .project-input {
            width: 100%;
            padding: 8px 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 12px;
        }

        .project-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .project-btn-row {
            display: flex;
            gap: 6px;
        }

        .btn-icon {
            flex: 1;
            padding: 8px 10px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 6px;
            color: var(--bg-primary);
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .btn-icon:hover { opacity: 0.9; }

        .sidebar-header {
            padding: 10px 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }

        .sidebar-header button {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 12px;
        }

        .sidebar-header button:hover { color: var(--text-primary); }

        .file-tree {
            flex: 1;
            overflow-y: auto;
            padding: 6px 0;
        }

        .file-tree::-webkit-scrollbar { width: 6px; }
        .file-tree::-webkit-scrollbar-thumb { background: var(--bg-hover); border-radius: 3px; }

        .tree-item {
            display: flex;
            align-items: center;
            padding: 5px 12px;
            cursor: pointer;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .tree-item:hover { background: var(--bg-hover); }
        .tree-item.active { background: var(--bg-hover); color: var(--text-primary); }
        .tree-item .icon { margin-right: 6px; font-size: 14px; }
        .tree-item.indent-1 { padding-left: 24px; }
        .tree-item.indent-2 { padding-left: 36px; }
        .tree-item.indent-3 { padding-left: 48px; }

        /* ===== ä¸»ç·¨è¼¯å€ ===== */
        .main-area {
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .tabs-bar {
            display: flex;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
        }

        .tabs-bar::-webkit-scrollbar { height: 0; }

        .tab {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            font-size: 12px;
            color: var(--text-muted);
            cursor: pointer;
            border-right: 1px solid var(--border-color);
            white-space: nowrap;
        }

        .tab:hover { color: var(--text-secondary); }
        .tab.active {
            background: var(--bg-primary);
            color: var(--text-primary);
            border-bottom: 2px solid var(--accent-primary);
        }

        .tab-close {
            opacity: 0;
            font-size: 14px;
            line-height: 1;
        }

        .tab:hover .tab-close { opacity: 1; }

        .editor-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 40px;
        }

        .welcome-logo { font-size: 56px; margin-bottom: 16px; }

        .welcome-title {
            font-size: 28px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            color: var(--text-muted);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .welcome-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
        }

        /* å¿«é€ŸæŒ‡å— */
        .quick-guide {
            width: 100%;
            max-width: 700px;
            text-align: left;
            margin-bottom: 30px;
        }

        .quick-guide h3 {
            font-size: 14px;
            color: var(--accent-primary);
            margin-bottom: 16px;
            text-align: center;
        }

        .guide-steps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .guide-step {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px 12px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .guide-step:hover {
            border-color: var(--accent-primary);
            background: var(--bg-hover);
        }

        .step-num {
            width: 28px;
            height: 28px;
            background: var(--accent-gradient);
            color: var(--bg-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            margin: 0 auto 10px;
        }

        .step-content strong {
            display: block;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .step-content p {
            font-size: 11px;
            color: var(--text-muted);
            margin: 0;
        }

        /* æˆ‘çš„ç«™é» */
        .my-sites {
            width: 100%;
            max-width: 700px;
            text-align: left;
        }

        .my-sites h3 {
            font-size: 14px;
            color: var(--accent-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .refresh-btn {
            background: var(--bg-hover);
            border: none;
            color: var(--text-muted);
            width: 24px;
            height: 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .refresh-btn:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        .sites-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            max-height: 200px;
            overflow-y: auto;
        }

        .site-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .site-card:hover {
            border-color: var(--accent-primary);
            background: var(--bg-hover);
        }

        .site-card .site-name {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .site-card .site-url {
            font-size: 11px;
            color: var(--accent-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .site-card .site-updated {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(137, 180, 250, 0.3);
        }

        .btn-secondary {
            background: var(--bg-hover);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover { background: var(--bg-tertiary); }

        .btn-success {
            background: var(--accent-secondary);
            color: var(--bg-primary);
        }

        .editor-content {
            height: 100%;
            overflow: auto;
            display: none;
        }

        .editor-content.active { display: block; }

        .code-view {
            display: flex;
            height: 100%;
        }

        .line-numbers {
            min-width: 45px;
            padding: 12px 8px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            text-align: right;
            font-family: 'Cascadia Code', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: var(--text-muted);
            user-select: none;
        }

        .code-content {
            flex: 1;
            padding: 12px 16px;
            font-family: 'Cascadia Code', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-all;
            overflow: auto;
        }

        /* ===== å³å´é¢æ¿ ===== */
        .right-panel {
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-tab {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            font-size: 11px;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .panel-tab:hover { color: var(--text-secondary); }

        .panel-tab.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        .panel-content {
            flex: 1;
            overflow: hidden;
            display: none;
            flex-direction: column;
        }

        .panel-content.active { display: flex; }

        /* AI èŠå¤© */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .chat-message {
            margin-bottom: 12px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.user { text-align: right; }

        .chat-message.user .msg-content {
            background: var(--accent-primary);
            color: var(--bg-primary);
            display: inline-block;
            padding: 8px 12px;
            border-radius: 12px 12px 4px 12px;
            max-width: 90%;
            text-align: left;
        }

        .chat-message.ai .msg-content {
            background: var(--bg-hover);
            padding: 10px 12px;
            border-radius: 12px 12px 12px 4px;
        }

        .msg-content {
            font-size: 12px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .msg-content pre {
            background: var(--bg-tertiary);
            padding: 8px;
            border-radius: 4px;
            margin: 6px 0;
            overflow-x: auto;
            font-size: 11px;
        }

        .msg-content code {
            background: var(--bg-tertiary);
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 11px;
        }

        .chat-input-area {
            padding: 10px;
            border-top: 1px solid var(--border-color);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 6px;
        }

        .chat-input {
            flex: 1;
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-primary);
            font-size: 12px;
            resize: none;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .chat-send {
            padding: 8px 14px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 16px;
            color: var(--bg-primary);
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }

        .chat-send:disabled { opacity: 0.5; cursor: not-allowed; }

        /* è¨­å®šé¢æ¿ */
        .settings-panel {
            padding: 12px;
            overflow-y: auto;
        }

        .settings-panel h3 {
            font-size: 13px;
            margin-bottom: 12px;
        }

        .settings-panel p {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .api-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            margin-bottom: 6px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .api-option:hover { background: var(--bg-hover); }
        .api-option.selected { border-color: var(--accent-primary); }
        .api-option input { accent-color: var(--accent-primary); }

        .api-option-info { font-size: 12px; }
        .api-option-info small { color: var(--text-muted); font-size: 10px; }

        .api-key-input {
            margin-top: 12px;
        }

        .api-key-input label {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .api-key-input input {
            width: 100%;
            padding: 8px 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 12px;
            font-family: monospace;
        }

        .api-key-input input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .api-status {
            margin-top: 10px;
            padding: 8px;
            border-radius: 6px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .api-status.ok { background: rgba(166, 227, 161, 0.15); color: var(--accent-secondary); }
        .api-status.no { background: rgba(243, 139, 168, 0.15); color: var(--accent-error); }

        /* å°ˆæ¡ˆè³‡è¨Š */
        .info-panel {
            padding: 12px;
            overflow-y: auto;
        }

        .info-section {
            margin-bottom: 16px;
        }

        .info-section h4 {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .info-card {
            background: var(--bg-tertiary);
            border-radius: 6px;
            padding: 10px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 12px;
        }

        .info-row .label { color: var(--text-muted); }
        .info-row .value { font-weight: 500; }
        .info-row .value.ok { color: var(--accent-secondary); }
        .info-row .value.warn { color: var(--accent-warning); }
        .info-row .value.err { color: var(--accent-error); }

        .tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
            margin: 2px;
        }

        .tag.ok { background: rgba(166, 227, 161, 0.2); color: var(--accent-secondary); }
        .tag.warn { background: rgba(249, 226, 175, 0.2); color: var(--accent-warning); }
        .tag.err { background: rgba(243, 139, 168, 0.2); color: var(--accent-error); }
        .tag.info { background: rgba(137, 180, 250, 0.2); color: var(--accent-primary); }

        .deploy-btns {
            padding: 12px;
            border-top: 1px solid var(--border-color);
        }

        .deploy-btns .btn {
            width: 100%;
            justify-content: center;
            margin-bottom: 6px;
        }

        /* ===== çµ‚ç«¯æ©Ÿ ===== */
        .terminal-area {
            grid-column: 1 / -1;
            background: var(--bg-tertiary);
            display: flex;
            flex-direction: column;
        }

        .terminal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .terminal-tabs {
            display: flex;
            gap: 4px;
        }

        .terminal-tab {
            padding: 4px 10px;
            font-size: 11px;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 4px;
        }

        .terminal-tab:hover { color: var(--text-secondary); }
        .terminal-tab.active { background: var(--bg-tertiary); color: var(--text-primary); }

        .terminal-actions button {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px 8px;
            font-size: 11px;
            border-radius: 3px;
        }

        .terminal-actions button:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .terminal-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px 12px;
            font-family: 'Cascadia Code', 'Consolas', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .terminal-content::-webkit-scrollbar { width: 6px; }
        .terminal-content::-webkit-scrollbar-thumb { background: var(--bg-hover); border-radius: 3px; }

        .term-line { margin-bottom: 2px; }
        .term-line.cmd { color: var(--accent-primary); }
        .term-line.ok { color: var(--accent-secondary); }
        .term-line.err { color: var(--accent-error); }
        .term-line.warn { color: var(--accent-warning); }
        .term-line.muted { color: var(--text-muted); }

        /* ===== ç‹€æ…‹åˆ— ===== */
        .statusbar {
            grid-column: 1 / -1;
            background: var(--accent-primary);
            color: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            font-size: 11px;
        }

        .statusbar-left, .statusbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
        }

        .status-dot.green { background: #00ff00; }
        .status-dot.yellow { background: #ffff00; }
        .status-dot.red { background: #ff4444; }

        .hidden { display: none !important; }

        /* ===== å½ˆå‡ºè¦–çª— ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h2 {
            font-size: 16px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 20px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .modal-close:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            max-height: 60vh;
        }

        .modal-body h3 {
            font-size: 14px;
            color: var(--accent-primary);
            margin: 16px 0 8px 0;
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p, .modal-body li {
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .modal-body ul {
            padding-left: 20px;
            margin: 8px 0;
        }

        .modal-body li {
            margin-bottom: 6px;
        }

        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .developer-info {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
            text-align: center;
        }

        .developer-info h4 {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .developer-info p {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: var(--bg-hover);
            border-radius: 20px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 12px;
            transition: all 0.2s;
        }

        .social-links a:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        .loading {
            width: 16px;
            height: 16px;
            border: 2px solid var(--bg-hover);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="ide-container">
        <!-- æ¨™é¡Œæ¬„ -->
        <div class="titlebar">
            <div class="titlebar-left">
                <span class="titlebar-logo">Netlify AI Deploy Studio</span>
                <div class="titlebar-menu">
                    <button onclick="showWelcome()">é¦–é </button>
                    <button onclick="analyzeProject()">åˆ†æ</button>
                    <button onclick="generateConfigs()">ç”Ÿæˆé…ç½®</button>
                    <button onclick="switchPanel('info')">éƒ¨ç½²</button>
                </div>
            </div>
            <div class="theme-selector">
                <div class="theme-dot active" data-theme="default" title="æ·±è—" onclick="setTheme('default')"></div>
                <div class="theme-dot" data-theme="purple" title="æ·±ç´«" onclick="setTheme('purple')"></div>
                <div class="theme-dot" data-theme="hacker" title="é§­å®¢ç¶ " onclick="setTheme('hacker')"></div>
                <div class="theme-dot" data-theme="sunset" title="æ—¥è½æ©™" onclick="setTheme('sunset')"></div>
                <div class="theme-dot" data-theme="ocean" title="æµ·æ´‹è—" onclick="setTheme('ocean')"></div>
                <div class="theme-dot" data-theme="light" title="æ·ºè‰²" onclick="setTheme('light')"></div>
            </div>
        </div>

        <!-- å·¦å´é‚Šæ¬„ -->
        <div class="sidebar">
            <div class="project-selector">
                <div class="project-input-group">
                    <input type="text" class="project-input" id="projectPath" placeholder="è¼¸å…¥å®Œæ•´è·¯å¾‘ï¼Œå¦‚ D:\my-project" value=".">
                    <div class="project-btn-row">
                        <button class="btn-icon" onclick="browseFolder()" title="ç€è¦½è³‡æ–™å¤¾">ğŸ“ ç€è¦½</button>
                        <button class="btn-icon" onclick="analyzeProject()" title="é–‹å•Ÿå°ˆæ¡ˆ">ğŸ“‚ é–‹å•Ÿ</button>
                    </div>
                </div>
            </div>
            <div class="sidebar-header">
                <span>æª”æ¡ˆç¸½ç®¡</span>
                <button onclick="analyzeProject()">â†»</button>
            </div>
            <div class="file-tree" id="fileTree">
                <div class="tree-item" style="padding: 20px; text-align: center; color: var(--text-muted);">
                    è«‹é¸æ“‡å°ˆæ¡ˆè³‡æ–™å¤¾
                </div>
            </div>
        </div>

        <!-- ä¸»ç·¨è¼¯å€ -->
        <div class="main-area">
            <div class="tabs-bar" id="tabsBar">
                <div class="tab active" data-tab="welcome">æ­¡è¿</div>
            </div>
            <div class="editor-container">
                <div class="welcome-page" id="welcomePage">
                    <div class="welcome-logo">ğŸš€</div>
                    <h1 class="welcome-title">Netlify AI Deploy Studio</h1>
                    <p class="welcome-subtitle">æ™ºæ…§éƒ¨ç½²åŠ©æ‰‹ - æ›¾æ…¶è‰¯(é˜¿äº®è€å¸«)å»ºç½®</p>

                    <div class="welcome-actions">
                        <button class="btn btn-primary" onclick="loginNetlify()">
                            ğŸ” ç™»éŒ„ Netlify
                        </button>
                        <button class="btn btn-secondary" onclick="openSettingsPanel()">
                            ğŸ”‘ è¨­å®š API Key
                        </button>
                        <button class="btn btn-secondary" onclick="showTutorial()">
                            ğŸ“– ä½¿ç”¨æ•™å­¸
                        </button>
                        <button class="btn btn-secondary" onclick="showInstallGuide()">
                            ğŸ’¿ å®‰è£æ•™å­¸
                        </button>
                    </div>

                    <!-- å¿«é€ŸæŒ‡å— -->
                    <div class="quick-guide">
                        <h3>ğŸ“‹ å¿«é€Ÿéƒ¨ç½²æŒ‡å—</h3>
                        <div class="guide-steps">
                            <div class="guide-step">
                                <div class="step-num">1</div>
                                <div class="step-content">
                                    <strong>é–‹å•Ÿå°ˆæ¡ˆ</strong>
                                    <p>é»æ“Šå·¦ä¸Šè§’ã€Œç€è¦½ã€é¸æ“‡å°ˆæ¡ˆè³‡æ–™å¤¾</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-num">2</div>
                                <div class="step-content">
                                    <strong>ç”Ÿæˆé…ç½®</strong>
                                    <p>è‡ªå‹•å»ºç«‹ netlify.toml éƒ¨ç½²è¨­å®šæª”</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-num">3</div>
                                <div class="step-content">
                                    <strong>åˆå§‹åŒ–ç«™é»</strong>
                                    <p>å»ºç«‹ Netlify ç«™é»ä¸¦è¨­å®šåŸŸå</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-num">4</div>
                                <div class="step-content">
                                    <strong>ä¸€éµéƒ¨ç½²</strong>
                                    <p>é è¦½æˆ–æ­£å¼ä¸Šç·šä½ çš„ç¶²ç«™</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- æˆ‘çš„ç«™é» -->
                    <div class="my-sites">
                        <h3>ğŸŒ æˆ‘çš„ç«™é» <button class="refresh-btn" onclick="loadMySites()">â†»</button></h3>
                        <div class="sites-list" id="sitesList">
                            <p style="color: var(--text-muted); font-size: 12px;">é»æ“Šä¸Šæ–¹ã€Œâ†»ã€è¼‰å…¥ç«™é»åˆ—è¡¨</p>
                        </div>
                    </div>
                </div>

                <div class="editor-content" id="editorContent">
                    <div class="code-view">
                        <div class="line-numbers" id="lineNumbers"></div>
                        <pre class="code-content" id="codeContent"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³å´é¢æ¿ -->
        <div class="right-panel">
            <div class="panel-tabs">
                <div class="panel-tab active" data-panel="ai" onclick="switchPanel('ai')">ğŸ¤– AI</div>
                <div class="panel-tab" data-panel="info" onclick="switchPanel('info')">ğŸ“Š è³‡è¨Š</div>
                <div class="panel-tab" data-panel="settings" onclick="switchPanel('settings')">âš™ï¸ è¨­å®š</div>
            </div>

            <!-- AI èŠå¤© -->
            <div class="panel-content active" id="panelAi">
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-message ai">
                        <div class="msg-content">
                            ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯ AI éƒ¨ç½²åŠ©æ‰‹ã€‚<br><br>
                            æˆ‘å¯ä»¥å¹«ä½ ï¼š<br>
                            â€¢ åˆ†æéƒ¨ç½²éŒ¯èª¤<br>
                            â€¢ å„ªåŒ–ç¨‹å¼ç¢¼<br>
                            â€¢ è§£ç­”å•é¡Œ<br><br>
                            è«‹å…ˆåœ¨ã€Œè¨­å®šã€ä¸­è¼¸å…¥ API Keyã€‚
                        </div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="chat-input-wrapper">
                        <textarea class="chat-input" id="chatInput" placeholder="è¼¸å…¥è¨Šæ¯..." rows="1" onkeydown="handleChatKey(event)"></textarea>
                        <button class="chat-send" id="chatSend" onclick="sendChat()">é€å‡º</button>
                    </div>
                </div>
            </div>

            <!-- å°ˆæ¡ˆè³‡è¨Š -->
            <div class="panel-content" id="panelInfo">
                <div class="info-panel">
                    <div class="info-section">
                        <h4>å°ˆæ¡ˆç‹€æ…‹</h4>
                        <div class="info-card">
                            <div class="info-row">
                                <span class="label">é¡å‹</span>
                                <span class="value" id="infoType">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">æª”æ¡ˆæ•¸</span>
                                <span class="value" id="infoFiles">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">è·¯å¾‘</span>
                                <span class="value" id="infoPath" style="font-size: 10px; word-break: break-all;">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-section">
                        <h4>åµæ¸¬çµæœ</h4>
                        <div id="infoDetected"><span class="tag info">å°šæœªåˆ†æ</span></div>
                    </div>

                    <div class="info-section">
                        <h4>ç¾æœ‰é…ç½®</h4>
                        <div id="infoConfigs"><span class="tag info">å°šæœªåˆ†æ</span></div>
                    </div>

                    <div class="info-section">
                        <h4>ç’°å¢ƒè®Šæ•¸</h4>
                        <div id="infoEnvVars"><span class="tag info">å°šæœªåˆ†æ</span></div>
                    </div>
                </div>

                <div class="deploy-btns">
                    <button class="btn btn-secondary" onclick="generateConfigs()">ğŸ“ ç”Ÿæˆé…ç½®</button>
                    <button class="btn btn-secondary" onclick="initSite()">ğŸ”— åˆå§‹åŒ–ç«™é»</button>
                    <button class="btn btn-secondary" onclick="updateDomain()">ğŸŒ ä¿®æ”¹åŸŸå</button>
                    <button class="btn btn-primary" onclick="deployPreview()">ğŸ‘ï¸ é è¦½éƒ¨ç½²</button>
                    <button class="btn btn-success" onclick="deployProd()">ğŸš€ æ­£å¼éƒ¨ç½²</button>
                </div>
            </div>

            <!-- è¨­å®š -->
            <div class="panel-content" id="panelSettings">
                <div class="settings-panel">
                    <h3>ğŸ”‘ AI API è¨­å®š</h3>
                    <p>é¸æ“‡ AI æœå‹™ä¸¦è¼¸å…¥ä½ çš„ API Keyã€‚<br>é‡‘é‘°åƒ…å­˜åœ¨æœ¬æ©Ÿï¼Œä¸æœƒä¸Šå‚³ã€‚</p>

                    <div class="api-option selected" onclick="selectProvider('openai')">
                        <input type="radio" name="provider" value="openai" checked>
                        <div class="api-option-info">
                            <div>OpenAI</div>
                        </div>
                    </div>

                    <div class="api-option" onclick="selectProvider('anthropic')">
                        <input type="radio" name="provider" value="anthropic">
                        <div class="api-option-info">
                            <div>Anthropic</div>
                        </div>
                    </div>

                    <div class="api-option" onclick="selectProvider('google')">
                        <input type="radio" name="provider" value="google">
                        <div class="api-option-info">
                            <div>Google</div>
                        </div>
                    </div>

                    <div class="api-key-input">
                        <label>API Key</label>
                        <input type="password" id="apiKeyInput" placeholder="è¼¸å…¥ä½ çš„ API Key..." onchange="saveApiKey()">
                    </div>

                    <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="testApi()">æ¸¬è©¦é€£ç·š</button>

                    <div class="api-status no" id="apiStatus">
                        âš ï¸ å°šæœªè¨­å®š API Key
                    </div>
                </div>
            </div>
        </div>

        <!-- çµ‚ç«¯æ©Ÿ -->
        <div class="terminal-area">
            <div class="terminal-header">
                <div class="terminal-tabs">
                    <div class="terminal-tab active">çµ‚ç«¯æ©Ÿ</div>
                </div>
                <div class="terminal-actions">
                    <button onclick="clearTerm()">æ¸…é™¤</button>
                </div>
            </div>
            <div class="terminal-content" id="terminalContent">
                <div class="term-line muted">Netlify AI Deploy Studio v2.0</div>
                <div class="term-line muted">æ›¾æ…¶è‰¯(é˜¿äº®è€å¸«)å»ºç½®</div>
                <div class="term-line muted">=====================================</div>
                <div class="term-line">æº–å‚™å°±ç·’ã€‚è«‹é¸æ“‡å°ˆæ¡ˆè³‡æ–™å¤¾é–‹å§‹ã€‚</div>
            </div>
        </div>

        <!-- ç‹€æ…‹åˆ— -->
        <div class="statusbar">
            <div class="statusbar-left">
                <span class="status-item"><span class="status-dot" id="statusCli"></span> CLI</span>
                <span class="status-item"><span class="status-dot" id="statusLogin"></span> ç™»å…¥</span>
                <span class="status-item"><span class="status-dot" id="statusAi"></span> AI</span>
            </div>
            <div class="statusbar-right">
                <span id="statusMsg">å°±ç·’</span>
            </div>
        </div>
    </div>

    <!-- ä½¿ç”¨æ•™å­¸å½ˆå‡ºè¦–çª— -->
    <div class="modal-overlay" id="tutorialModal" onclick="closeTutorial(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>ğŸ“– ä½¿ç”¨æ•™å­¸</h2>
                <button class="modal-close" onclick="closeTutorial()">&times;</button>
            </div>
            <div class="modal-body">
                <h3>ğŸš€ å¿«é€Ÿé–‹å§‹</h3>
                <ul>
                    <li><strong>æ­¥é©Ÿ 1ï¼š</strong>åœ¨å·¦ä¸Šè§’è¼¸å…¥ä½ çš„å°ˆæ¡ˆå®Œæ•´è·¯å¾‘ï¼ˆä¾‹å¦‚ï¼šD:\Projects\my-websiteï¼‰</li>
                    <li><strong>æ­¥é©Ÿ 2ï¼š</strong>é»æ“Šã€Œé–‹å•Ÿã€æŒ‰éˆ•åˆ†æå°ˆæ¡ˆ</li>
                    <li><strong>æ­¥é©Ÿ 3ï¼š</strong>æŸ¥çœ‹å³å´ã€Œè³‡è¨Šã€é¢æ¿ç¢ºèªå°ˆæ¡ˆç‹€æ…‹</li>
                    <li><strong>æ­¥é©Ÿ 4ï¼š</strong>é»æ“Šã€Œç”Ÿæˆé…ç½®ã€è‡ªå‹•å»ºç«‹ netlify.toml ç­‰æª”æ¡ˆ</li>
                    <li><strong>æ­¥é©Ÿ 5ï¼š</strong>é»æ“Šã€Œé è¦½éƒ¨ç½²ã€æˆ–ã€Œæ­£å¼éƒ¨ç½²ã€ä¸Šç·šä½ çš„ç¶²ç«™</li>
                </ul>

                <h3>ğŸ¤– AI åŠ©æ‰‹åŠŸèƒ½</h3>
                <ul>
                    <li>åœ¨å³å´ã€Œè¨­å®šã€é¢æ¿é¸æ“‡ AI æœå‹™ï¼ˆOpenAI / Anthropic / Googleï¼‰</li>
                    <li>è¼¸å…¥ä½ è‡ªå·±çš„ API Keyï¼ˆé‡‘é‘°åªå­˜åœ¨ä½ çš„é›»è…¦ï¼Œä¸æœƒä¸Šå‚³ï¼‰</li>
                    <li>åˆ‡æ›åˆ°ã€ŒAIã€é¢æ¿ï¼Œå³å¯èˆ‡ AI å°è©±</li>
                    <li>AI å¯ä»¥å¹«ä½ åˆ†æéƒ¨ç½²éŒ¯èª¤ã€å„ªåŒ–ç¨‹å¼ç¢¼ã€è§£ç­”å•é¡Œ</li>
                </ul>

                <h3>ğŸ¨ ä¸»é¡Œåˆ‡æ›</h3>
                <p>é»æ“Šå³ä¸Šè§’çš„å½©è‰²åœ“é»å¯åˆ‡æ›ä»‹é¢ä¸»é¡Œï¼Œå…±æœ‰ 6 ç¨®é¢¨æ ¼å¯é¸æ“‡ã€‚</p>

                <h3>ğŸ“ æª”æ¡ˆç€è¦½</h3>
                <ul>
                    <li>åˆ†æå°ˆæ¡ˆå¾Œï¼Œå·¦å´æœƒé¡¯ç¤ºæª”æ¡ˆç¸½ç®¡</li>
                    <li>é»æ“Šæª”æ¡ˆå¯åœ¨ä¸­å¤®å€åŸŸé è¦½å…§å®¹</li>
                    <li>æ”¯æ´å¤šå€‹æª”æ¡ˆåŒæ™‚é–‹å•Ÿï¼ˆåˆ†é é¡¯ç¤ºï¼‰</li>
                </ul>

                <h3>âš ï¸ æ³¨æ„äº‹é …</h3>
                <ul>
                    <li>è«‹å…ˆå®‰è£ Netlify CLIï¼š<code>npm install -g netlify-cli</code></li>
                    <li>é¦–æ¬¡ä½¿ç”¨éœ€ç™»å…¥ Netlifyï¼š<code>netlify login</code></li>
                    <li>API Key åƒ…å­˜åœ¨æœ¬æ©Ÿç€è¦½å™¨ï¼Œé—œé–‰å¾Œéœ€é‡æ–°è¼¸å…¥</li>
                </ul>

                <div class="developer-info">
                    <h4>ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…è³‡è¨Š</h4>
                    <p>æ›¾æ…¶è‰¯ï¼ˆé˜¿äº®è€å¸«ï¼‰</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/iddmail" target="_blank">
                            ğŸ“˜ Facebook
                        </a>
                        <a href="https://www.youtube.com/@Liang-yt02" target="_blank">
                            ğŸ“º YouTube
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å®‰è£æ•™å­¸å½ˆå‡ºè¦–çª— -->
    <div class="modal-overlay" id="installModal" onclick="closeInstallGuide(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>ğŸ’¿ å®‰è£æ•™å­¸</h2>
                <button class="modal-close" onclick="closeInstallGuide()">&times;</button>
            </div>
            <div class="modal-body">
                <h3>ğŸ“‹ ç³»çµ±éœ€æ±‚</h3>
                <ul>
                    <li><strong>Node.js</strong> - ç‰ˆæœ¬ 18 ä»¥ä¸Šï¼ˆç”¨æ–¼åŸ·è¡Œ Netlify CLIï¼‰</li>
                    <li><strong>Python</strong> - ç‰ˆæœ¬ 3.8 ä»¥ä¸Šï¼ˆç”¨æ–¼åŸ·è¡Œæœ¬æ‡‰ç”¨ç¨‹å¼ï¼‰</li>
                    <li><strong>ç€è¦½å™¨</strong> - Chrome / Edge / Firefox ç­‰ç¾ä»£ç€è¦½å™¨</li>
                </ul>

                <h3>ğŸ”§ æ­¥é©Ÿä¸€ï¼šå®‰è£ Node.js</h3>
                <ul>
                    <li>å‰å¾€ <a href="https://nodejs.org/" target="_blank">https://nodejs.org/</a></li>
                    <li>ä¸‹è¼‰ LTS ç‰ˆæœ¬ï¼ˆé•·æœŸæ”¯æ´ç‰ˆï¼‰</li>
                    <li>åŸ·è¡Œå®‰è£ç¨‹å¼ï¼Œä¸€è·¯æŒ‰ã€Œä¸‹ä¸€æ­¥ã€å®Œæˆå®‰è£</li>
                    <li>é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒï¼Œè¼¸å…¥ <code>node --version</code> ç¢ºèªå®‰è£æˆåŠŸ</li>
                </ul>

                <h3>ğŸŒ æ­¥é©ŸäºŒï¼šå®‰è£ Netlify CLI</h3>
                <ul>
                    <li>é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒï¼ˆä»¥ç³»çµ±ç®¡ç†å“¡èº«ä»½åŸ·è¡Œï¼‰</li>
                    <li>è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š</li>
                </ul>
                <pre style="background: var(--bg-tertiary); padding: 12px; border-radius: 6px; margin: 10px 0;">npm install -g netlify-cli</pre>
                <ul>
                    <li>ç­‰å¾…å®‰è£å®Œæˆï¼Œè¼¸å…¥ <code>netlify --version</code> ç¢ºèªå®‰è£æˆåŠŸ</li>
                </ul>

                <h3>ğŸ æ­¥é©Ÿä¸‰ï¼šå®‰è£ Python ä¾è³´</h3>
                <ul>
                    <li>é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒ</li>
                    <li>åˆ‡æ›åˆ°å°ˆæ¡ˆè³‡æ–™å¤¾ï¼š<code>cd D:\Netlify CLI AI</code></li>
                    <li>è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å®‰è£ä¾è³´å¥—ä»¶ï¼š</li>
                </ul>
                <pre style="background: var(--bg-tertiary); padding: 12px; border-radius: 6px; margin: 10px 0;">pip install -r requirements.txt</pre>

                <h3>ğŸš€ æ­¥é©Ÿå››ï¼šå•Ÿå‹•æ‡‰ç”¨ç¨‹å¼</h3>
                <ul>
                    <li><strong>æ–¹æ³•ä¸€ï¼š</strong>ç›´æ¥é›™æ“Š <code>run_gui.bat</code> æª”æ¡ˆ</li>
                    <li><strong>æ–¹æ³•äºŒï¼š</strong>åœ¨å‘½ä»¤æç¤ºå­—å…ƒè¼¸å…¥ï¼š</li>
                </ul>
                <pre style="background: var(--bg-tertiary); padding: 12px; border-radius: 6px; margin: 10px 0;">python app.py</pre>
                <ul>
                    <li>æ‡‰ç”¨ç¨‹å¼æœƒè‡ªå‹•é–‹å•Ÿç€è¦½å™¨ï¼Œç¶²å€ç‚º <code>http://127.0.0.1:5886</code></li>
                </ul>

                <h3>ğŸ” æ­¥é©Ÿäº”ï¼šç™»éŒ„ Netlify</h3>
                <ul>
                    <li>é»æ“Šé¦–é çš„ã€ŒğŸ” ç™»éŒ„ Netlifyã€æŒ‰éˆ•</li>
                    <li>ç€è¦½å™¨æœƒé–‹å•Ÿ Netlify æˆæ¬Šé é¢</li>
                    <li>ç™»å…¥ä½ çš„ Netlify å¸³è™Ÿä¸¦æˆæ¬Š</li>
                    <li>æˆæ¬Šå®Œæˆå¾Œï¼Œç‹€æ…‹åˆ—çš„ã€Œç™»å…¥ã€æŒ‡ç¤ºç‡ˆæœƒè®Šæˆç¶ è‰²</li>
                </ul>

                <h3>âœ… å®‰è£å®Œæˆï¼</h3>
                <p>ç¾åœ¨ä½ å¯ä»¥é–‹å§‹ä½¿ç”¨ Netlify AI Deploy Studio ä¾†éƒ¨ç½²ä½ çš„ç¶²ç«™äº†ï¼</p>

                <div class="developer-info">
                    <h4>â“ é‡åˆ°å•é¡Œï¼Ÿ</h4>
                    <p>å¦‚æœå®‰è£éç¨‹ä¸­é‡åˆ°å•é¡Œï¼Œæ­¡è¿è¯ç¹«é˜¿äº®è€å¸«</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/iddmail" target="_blank">
                            ğŸ“˜ Facebook
                        </a>
                        <a href="https://www.youtube.com/@Liang-yt02" target="_blank">
                            ğŸ“º YouTube
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let analysis = null;
        let currentFile = null;
        let provider = 'openai';
        let apiKey = '';

        // === ä¸»é¡Œ ===
        function setTheme(t) {
            if (t === 'default') document.documentElement.removeAttribute('data-theme');
            else document.documentElement.setAttribute('data-theme', t);
            document.querySelectorAll('.theme-dot').forEach(d => d.classList.toggle('active', d.dataset.theme === t));
            localStorage.setItem('theme', t);
        }

        // === é¢æ¿åˆ‡æ› ===
        function switchPanel(p) {
            document.querySelectorAll('.panel-tab').forEach(t => t.classList.toggle('active', t.dataset.panel === p));
            document.querySelectorAll('.panel-content').forEach(c => c.classList.toggle('active', c.id === 'panel' + p.charAt(0).toUpperCase() + p.slice(1)));
        }

        // === é–‹å•Ÿè¨­å®šé¢æ¿ ===
        function openSettingsPanel() {
            switchPanel('settings');
            // èšç„¦åˆ° API Key è¼¸å…¥æ¡†
            setTimeout(() => {
                document.getElementById('apiKeyInput').focus();
            }, 100);
        }

        // === ç™»éŒ„ Netlify ===
        async function loginNetlify() {
            termLog('$ netlify login', 'cmd');
            termLog('æ­£åœ¨é–‹å•Ÿ Netlify æˆæ¬Šé é¢...', 'muted');
            termLog('âš ï¸ è«‹åœ¨ç€è¦½å™¨ä¸­é»æ“Šã€ŒAuthorizeã€æŒ‰éˆ•å®Œæˆæˆæ¬Šï¼', 'warn');
            termLog('ğŸ“‹ æˆæ¬Šæ­¥é©Ÿï¼š1. ç€è¦½å™¨æœƒé–‹å•Ÿ Netlify æˆæ¬Šé é¢', 'muted');
            termLog('           2. é»æ“Šç¶ è‰²ã€ŒAuthorizeã€æŒ‰éˆ•', 'muted');
            termLog('           3. ç­‰å¾…æ­¤è™•é¡¯ç¤ºã€Œç™»éŒ„æˆåŠŸã€', 'muted');
            setStatus('ç­‰å¾…æˆæ¬Šä¸­...');

            addChat('ai', 'ğŸ” **æ­£åœ¨é€²è¡Œ Netlify æˆæ¬Š...**\n\nè«‹åœ¨å‰›é–‹å•Ÿçš„ç€è¦½å™¨è¦–çª—ä¸­ï¼š\n1. å¦‚æœå°šæœªç™»å…¥ Netlifyï¼Œè«‹å…ˆç™»å…¥\n2. çœ‹åˆ°ã€ŒAuthorize Applicationã€é é¢å¾Œ\n3. é»æ“Šç¶ è‰²çš„ã€Œ**Authorize**ã€æŒ‰éˆ•\n\næˆæ¬Šå®Œæˆå¾Œé€™è£¡æœƒè‡ªå‹•é¡¯ç¤ºçµæœã€‚');

            try {
                const res = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await res.json();

                if (data.success) {
                    termLog('ç™»éŒ„æˆåŠŸï¼', 'ok');
                    if (data.stdout) {
                        data.stdout.split('\n').forEach(l => l.trim() && termLog(l, 'ok'));
                    }
                    addChat('ai', 'ğŸ‰ Netlify ç™»éŒ„æˆåŠŸï¼ç¾åœ¨å¯ä»¥é–‹å§‹éƒ¨ç½²äº†ã€‚');
                    checkCli(); // æ›´æ–°ç‹€æ…‹åˆ—
                } else {
                    termLog('ç™»éŒ„å¤±æ•—æˆ–å·²å–æ¶ˆ', 'warn');
                    if (data.stderr) {
                        data.stderr.split('\n').forEach(l => l.trim() && termLog(l, 'err'));
                    }
                    if (data.message) {
                        termLog(data.message, 'warn');
                    }
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        // === å°ˆæ¡ˆåˆ†æ ===
        async function analyzeProject() {
            const path = document.getElementById('projectPath').value.trim();
            if (!path) { termLog('è«‹è¼¸å…¥å°ˆæ¡ˆè·¯å¾‘', 'err'); return; }

            termLog('$ åˆ†æå°ˆæ¡ˆ: ' + path, 'cmd');
            setStatus('åˆ†æä¸­...');

            try {
                const res = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ path })
                });
                const data = await res.json();

                if (data.success) {
                    analysis = data.analysis;
                    showAnalysis(data.analysis);
                    showFileTree(data.file_tree || []);
                    termLog('åˆ†æå®Œæˆï¼', 'ok');
                    checkCli();
                    switchPanel('info');
                } else {
                    termLog('åˆ†æå¤±æ•—: ' + data.error, 'err');
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        function showAnalysis(a) {
            document.getElementById('infoType').textContent = a.type_name;
            document.getElementById('infoFiles').textContent = a.file_count + ' å€‹';
            document.getElementById('infoPath').textContent = a.path;

            let det = '';
            det += `<span class="tag ${a.has_html ? 'ok' : 'err'}">${a.has_html ? 'âœ“' : 'âœ—'} HTML</span>`;
            det += `<span class="tag ${a.has_python ? 'ok' : 'err'}">${a.has_python ? 'âœ“' : 'âœ—'} Python</span>`;
            det += `<span class="tag ${a.has_node ? 'ok' : 'err'}">${a.has_node ? 'âœ“' : 'âœ—'} Node.js</span>`;
            document.getElementById('infoDetected').innerHTML = det;

            let cfg = '';
            cfg += `<span class="tag ${a.has_netlify_config ? 'ok' : 'warn'}">${a.has_netlify_config ? 'âœ“' : 'âœ—'} netlify.toml</span>`;
            cfg += `<span class="tag ${a.has_gitignore ? 'ok' : 'warn'}">${a.has_gitignore ? 'âœ“' : 'âœ—'} .gitignore</span>`;
            document.getElementById('infoConfigs').innerHTML = cfg;

            const envs = a.env_vars_needed || [];
            document.getElementById('infoEnvVars').innerHTML = envs.length > 0
                ? envs.map(v => `<span class="tag warn">${v}</span>`).join('')
                : '<span class="tag ok">ç„¡éœ€é¡å¤–è¨­å®š</span>';
        }

        function showFileTree(files) {
            const tree = document.getElementById('fileTree');
            if (!files.length) { tree.innerHTML = '<div class="tree-item" style="color: var(--text-muted);">æ²’æœ‰æª”æ¡ˆ</div>'; return; }

            const root = {};
            files.forEach(f => {
                const parts = f.split(/[/\\]/);
                let cur = root;
                parts.forEach((p, i) => {
                    if (!cur[p]) cur[p] = i === parts.length - 1 ? null : {};
                    if (cur[p] !== null) cur = cur[p];
                });
            });

            function render(obj, indent = 0) {
                let html = '';
                const entries = Object.entries(obj).sort((a, b) => {
                    const aF = a[1] !== null, bF = b[1] !== null;
                    if (aF !== bF) return bF - aF;
                    return a[0].localeCompare(b[0]);
                });

                for (const [name, children] of entries) {
                    const isFolder = children !== null;
                    const icon = isFolder ? 'ğŸ“' : getIcon(name);
                    const ind = indent > 0 ? ' indent-' + Math.min(indent, 3) : '';
                    const click = isFolder ? '' : ` onclick="openFile('${name}')"`;
                    html += `<div class="tree-item${ind}"${click}><span class="icon">${icon}</span>${name}</div>`;
                    if (isFolder) html += render(children, indent + 1);
                }
                return html;
            }

            tree.innerHTML = render(root);
        }

        function getIcon(name) {
            const ext = name.split('.').pop().toLowerCase();
            const icons = {
                html: 'ğŸŒ', css: 'ğŸ¨', js: 'ğŸ“œ', ts: 'ğŸ’', py: 'ğŸ',
                json: 'ğŸ“‹', md: 'ğŸ“', toml: 'âš™ï¸', yml: 'âš™ï¸', env: 'ğŸ”'
            };
            return icons[ext] || 'ğŸ“„';
        }

        // === æª”æ¡ˆé–‹å•Ÿ ===
        async function openFile(name) {
            if (!analysis) return;
            termLog('$ é–‹å•Ÿ: ' + name, 'cmd');

            try {
                const res = await fetch('/api/read-file', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ path: analysis.path, filename: name })
                });
                const data = await res.json();

                if (data.success) {
                    currentFile = name;
                    document.getElementById('welcomePage').style.display = 'none';
                    document.getElementById('editorContent').classList.add('active');

                    const lines = data.content.split('\n');
                    document.getElementById('lineNumbers').innerHTML = lines.map((_, i) => i + 1).join('<br>');
                    document.getElementById('codeContent').textContent = data.content;

                    // Tab
                    let tab = document.querySelector(`[data-tab="${name}"]`);
                    if (!tab) {
                        tab = document.createElement('div');
                        tab.className = 'tab';
                        tab.dataset.tab = name;
                        tab.innerHTML = `${getIcon(name)} ${name} <span class="tab-close" onclick="closeTab('${name}',event)">Ã—</span>`;
                        tab.onclick = () => openFile(name);
                        document.getElementById('tabsBar').appendChild(tab);
                    }
                    document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === name));
                } else {
                    termLog('ç„¡æ³•é–‹å•Ÿ: ' + data.error, 'err');
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
        }

        function closeTab(name, e) {
            e.stopPropagation();
            const tab = document.querySelector(`[data-tab="${name}"]`);
            if (tab) tab.remove();
            if (currentFile === name) showWelcome();
        }

        function showWelcome() {
            document.getElementById('welcomePage').style.display = 'flex';
            document.getElementById('editorContent').classList.remove('active');
            currentFile = null;
            document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === 'welcome'));
        }

        // === é…ç½®ç”Ÿæˆ ===
        async function generateConfigs() {
            if (!analysis) { termLog('è«‹å…ˆåˆ†æå°ˆæ¡ˆ', 'err'); return; }
            termLog('$ ç”Ÿæˆé…ç½®æª”...', 'cmd');
            setStatus('ç”Ÿæˆä¸­...');

            try {
                const res = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        path: analysis.path,
                        config: {
                            netlify_toml: true,
                            gitignore: true,
                            env_example: true,
                            requirements: analysis.has_python,
                            publish_dir: '.',
                            functions_dir: analysis.functions_dir || (analysis.has_python ? 'netlify/functions' : null),
                            env_vars: analysis.env_vars_needed || []
                        }
                    })
                });
                const data = await res.json();

                if (data.success) {
                    termLog('é…ç½®æª”ç”Ÿæˆå®Œæˆï¼', 'ok');
                    data.results.forEach(r => termLog('  âœ“ ' + r.file, 'ok'));
                    analyzeProject();
                } else {
                    termLog('å¤±æ•—: ' + data.error, 'err');
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        // === ä¿®æ”¹åŸŸå ===
        async function updateDomain() {
            if (!analysis) { termLog('è«‹å…ˆåˆ†æå°ˆæ¡ˆ', 'err'); return; }

            const newName = prompt('è«‹è¼¸å…¥æ–°çš„ç«™é»åç¨±ï¼š\n\nä¾‹å¦‚è¼¸å…¥ my-cool-site\nå°‡æœƒè®Šæˆ my-cool-site.netlify.app\n\næ³¨æ„ï¼šåç¨±åªèƒ½åŒ…å«å°å¯«å­—æ¯ã€æ•¸å­—å’Œé€£å­—è™Ÿ(-)');

            if (!newName) return;

            termLog('$ netlify sites:update --name ' + newName, 'cmd');
            termLog('æ›´æ–°åŸŸåä¸­...', 'muted');
            setStatus('æ›´æ–°ä¸­...');

            try {
                const res = await fetch('/api/update-domain', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        path: analysis.path,
                        new_name: newName
                    })
                });
                const data = await res.json();

                if (data.success) {
                    termLog('åŸŸåæ›´æ–°æˆåŠŸï¼', 'ok');
                    termLog('æ–°ç¶²å€: https://' + newName + '.netlify.app', 'ok');
                    addChat('ai', `ğŸ‰ åŸŸåå·²æ›´æ–°ï¼\n\næ–°ç¶²å€ï¼šhttps://${newName}.netlify.app`);
                } else {
                    termLog('æ›´æ–°å¤±æ•—: ' + (data.error || ''), 'err');
                    if (data.stderr) {
                        data.stderr.split('\n').forEach(l => l.trim() && termLog(l, 'err'));
                    }
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        // === åˆå§‹åŒ–ç«™é» ===
        async function initSite() {
            if (!analysis) { termLog('è«‹å…ˆåˆ†æå°ˆæ¡ˆ', 'err'); return; }

            // å…ˆç²å–åœ˜éšŠåˆ—è¡¨
            termLog('æ­£åœ¨ç²å–åœ˜éšŠåˆ—è¡¨...', 'muted');
            setStatus('ç²å–åœ˜éšŠä¸­...');

            let teams = [];
            try {
                const teamsRes = await fetch('/api/list-teams');
                const teamsData = await teamsRes.json();
                if (teamsData.success && teamsData.teams.length > 0) {
                    teams = teamsData.teams;
                    termLog('æ‰¾åˆ° ' + teams.length + ' å€‹åœ˜éšŠ', 'ok');
                }
            } catch (e) {
                termLog('ç„¡æ³•ç²å–åœ˜éšŠåˆ—è¡¨: ' + e.message, 'warn');
            }

            // è®“ç”¨æˆ¶é¸æ“‡åœ˜éšŠ
            let accountSlug = '';
            if (teams.length > 1) {
                const teamList = teams.map((t, i) => `${i + 1}. ${t.name} (${t.slug})`).join('\n');
                const choice = prompt(`è«‹é¸æ“‡åœ˜éšŠï¼ˆè¼¸å…¥æ•¸å­—ï¼‰ï¼š\n\n${teamList}\n\nè¼¸å…¥ 1-${teams.length}ï¼š`);
                const idx = parseInt(choice) - 1;
                if (idx >= 0 && idx < teams.length) {
                    accountSlug = teams[idx].slug;
                    termLog('é¸æ“‡åœ˜éšŠ: ' + teams[idx].name, 'ok');
                }
            } else if (teams.length === 1) {
                accountSlug = teams[0].slug;
                termLog('ä½¿ç”¨åœ˜éšŠ: ' + teams[0].name, 'ok');
            }

            const siteName = prompt('è«‹è¼¸å…¥ç«™é»åç¨±ï¼ˆç•™ç©ºå‰‡è‡ªå‹•ç”Ÿæˆï¼‰ï¼š\n\nä¾‹å¦‚ï¼šmy-awesome-site\nå°‡æœƒå»ºç«‹ my-awesome-site.netlify.app');

            termLog('$ netlify sites:create' + (siteName ? ' --name ' + siteName : '') + (accountSlug ? ' --account-slug ' + accountSlug : ''), 'cmd');
            termLog('åˆå§‹åŒ–ç«™é»ä¸­...', 'muted');
            setStatus('åˆå§‹åŒ–ä¸­...');

            try {
                const res = await fetch('/api/init-site', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        path: analysis.path,
                        site_name: siteName || '',
                        account_slug: accountSlug
                    })
                });
                const data = await res.json();

                if (data.success) {
                    termLog('ç«™é»åˆå§‹åŒ–æˆåŠŸï¼', 'ok');
                    if (data.stdout) {
                        data.stdout.split('\n').forEach(l => l.trim() && termLog(l));
                    }
                    addChat('ai', 'ğŸ‰ ç«™é»åˆå§‹åŒ–æˆåŠŸï¼ç¾åœ¨å¯ä»¥éƒ¨ç½²äº†ã€‚');
                } else {
                    termLog('åˆå§‹åŒ–å¤±æ•—: ' + (data.error || 'æœªçŸ¥éŒ¯èª¤'), 'err');
                    if (data.stderr) {
                        data.stderr.split('\n').forEach(l => l.trim() && termLog(l, 'err'));
                    }
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        // === éƒ¨ç½² ===
        async function deployPreview() { await deploy('preview'); }
        async function deployProd() {
            if (!confirm('ç¢ºå®šæ­£å¼éƒ¨ç½²ï¼Ÿ')) return;
            await deploy('production');
        }

        async function deploy(type) {
            if (!analysis) { termLog('è«‹å…ˆåˆ†æå°ˆæ¡ˆ', 'err'); return; }
            const label = type === 'preview' ? 'é è¦½' : 'æ­£å¼';
            termLog(`$ netlify deploy ${type === 'production' ? '--prod' : ''}`, 'cmd');
            termLog(`${label}éƒ¨ç½²ä¸­...`, 'muted');
            setStatus(`${label}éƒ¨ç½²ä¸­...`);

            try {
                const res = await fetch('/api/deploy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ path: analysis.path, type })
                });
                const data = await res.json();

                if (data.success) {
                    termLog(`${label}éƒ¨ç½²æˆåŠŸï¼`, 'ok');
                    if (data.url) {
                        termLog('URL: ' + data.url, 'ok');
                        addChat('ai', `ğŸ‰ éƒ¨ç½²æˆåŠŸï¼\n\n${data.url}`);
                    }
                } else {
                    if (data.needs_init) {
                        termLog('å°šæœªé€£çµ Netlify ç«™é»', 'warn');
                        termLog('è«‹å…ˆé»æ“Šã€ŒğŸ”— åˆå§‹åŒ–ç«™é»ã€æŒ‰éˆ•', 'warn');
                        addChat('ai', 'âš ï¸ é€™å€‹å°ˆæ¡ˆé‚„æ²’é€£çµåˆ° Netlify ç«™é»ã€‚\n\nè«‹å…ˆé»æ“Šå³å´ã€ŒğŸ“Š è³‡è¨Šã€é¢æ¿ä¸­çš„ã€ŒğŸ”— åˆå§‹åŒ–ç«™é»ã€æŒ‰éˆ•ä¾†å‰µå»ºä¸¦é€£çµç«™é»ã€‚');
                    } else {
                        termLog('éƒ¨ç½²å¤±æ•—: ' + (data.error || ''), 'err');
                        if (data.stderr) {
                            data.stderr.split('\n').forEach(l => l.trim() && termLog(l, 'err'));
                            if (apiKey) analyzeError(data.stderr);
                        }
                    }
                }
            } catch (e) {
                termLog('éŒ¯èª¤: ' + e.message, 'err');
            }
            setStatus('å°±ç·’');
        }

        // === CLI ç‹€æ…‹ ===
        async function checkCli() {
            try {
                const res = await fetch('/api/check-cli');
                const data = await res.json();
                document.getElementById('statusCli').className = 'status-dot ' + (data.cli_installed ? 'green' : 'red');
                document.getElementById('statusLogin').className = 'status-dot ' + (data.logged_in ? 'green' : 'yellow');
            } catch {
                document.getElementById('statusCli').className = 'status-dot red';
                document.getElementById('statusLogin').className = 'status-dot red';
            }
        }

        // === AI èŠå¤© ===
        function handleChatKey(e) {
            if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendChat(); }
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const msg = input.value.trim();
            if (!msg) return;
            if (!apiKey) { addChat('ai', 'è«‹å…ˆåœ¨ã€Œè¨­å®šã€è¼¸å…¥ API Key'); return; }

            addChat('user', msg);
            input.value = '';
            document.getElementById('chatSend').disabled = true;
            addChat('ai', 'æ€è€ƒä¸­...');

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: msg,
                        provider,
                        api_key: apiKey,
                        context: analysis ? JSON.stringify(analysis) : null
                    })
                });
                const data = await res.json();

                const msgs = document.getElementById('chatMessages');
                msgs.removeChild(msgs.lastChild);

                addChat('ai', data.success ? data.response : 'éŒ¯èª¤: ' + data.error);
            } catch (e) {
                const msgs = document.getElementById('chatMessages');
                msgs.removeChild(msgs.lastChild);
                addChat('ai', 'é€£ç·šéŒ¯èª¤: ' + e.message);
            }
            document.getElementById('chatSend').disabled = false;
        }

        function addChat(type, content) {
            const msgs = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.className = 'chat-message ' + type;
            div.innerHTML = `<div class="msg-content">${content.replace(/\n/g, '<br>')}</div>`;
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }

        async function analyzeError(log) {
            if (!apiKey) return;
            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: 'åˆ†æé€™å€‹éƒ¨ç½²éŒ¯èª¤ï¼š\n' + log,
                        provider,
                        api_key: apiKey,
                        context: analysis ? JSON.stringify(analysis) : null
                    })
                });
                const data = await res.json();
                if (data.success) addChat('ai', data.response);
            } catch {}
        }

        // === API è¨­å®š ===
        function selectProvider(p) {
            provider = p;
            document.querySelectorAll('.api-option').forEach(o => {
                o.classList.toggle('selected', o.querySelector('input').value === p);
                o.querySelector('input').checked = o.querySelector('input').value === p;
            });
            const saved = localStorage.getItem('apiKey_' + p);
            document.getElementById('apiKeyInput').value = saved || '';
            apiKey = saved || '';
            updateApiStatus();
        }

        function saveApiKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            apiKey = key;
            if (key) localStorage.setItem('apiKey_' + provider, key);
            updateApiStatus();
        }

        function updateApiStatus() {
            const status = document.getElementById('apiStatus');
            const dot = document.getElementById('statusAi');
            if (apiKey) {
                status.className = 'api-status ok';
                status.textContent = 'âœ“ API Key å·²è¨­å®š';
                dot.className = 'status-dot green';
            } else {
                status.className = 'api-status no';
                status.textContent = 'âš ï¸ å°šæœªè¨­å®š API Key';
                dot.className = 'status-dot yellow';
            }
        }

        async function testApi() {
            if (!apiKey) { termLog('è«‹å…ˆè¼¸å…¥ API Key', 'err'); return; }
            termLog('æ¸¬è©¦ ' + provider.toUpperCase() + ' API...', 'muted');

            try {
                const res = await fetch('/api/test-connection', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ provider, api_key: apiKey })
                });
                const data = await res.json();
                termLog(data.success ? 'API é€£ç·šæˆåŠŸï¼' : 'é€£ç·šå¤±æ•—: ' + data.error, data.success ? 'ok' : 'err');
            } catch (e) {
                termLog('é€£ç·šéŒ¯èª¤: ' + e.message, 'err');
            }
        }

        // === çµ‚ç«¯æ©Ÿ ===
        function termLog(msg, type = '') {
            const term = document.getElementById('terminalContent');
            const line = document.createElement('div');
            line.className = 'term-line ' + type;
            line.textContent = msg;
            term.appendChild(line);
            term.scrollTop = term.scrollHeight;
        }

        function clearTerm() {
            document.getElementById('terminalContent').innerHTML = '<div class="term-line muted">çµ‚ç«¯æ©Ÿå·²æ¸…é™¤</div>';
        }

        function setStatus(msg) {
            document.getElementById('statusMsg').textContent = msg;
        }

        // === å½ˆå‡ºè¦–çª— ===
        function showTutorial() {
            document.getElementById('tutorialModal').classList.add('show');
        }

        function closeTutorial(e) {
            if (!e || e.target === e.currentTarget) {
                document.getElementById('tutorialModal').classList.remove('show');
            }
        }

        function showInstallGuide() {
            document.getElementById('installModal').classList.add('show');
        }

        function closeInstallGuide(e) {
            if (!e || e.target === e.currentTarget) {
                document.getElementById('installModal').classList.remove('show');
            }
        }

        // === ç€è¦½è³‡æ–™å¤¾ ===
        async function browseFolder() {
            try {
                const res = await fetch('/api/browse-folder');
                const data = await res.json();
                if (data.success && data.path) {
                    document.getElementById('projectPath').value = data.path;
                    termLog('å·²é¸æ“‡: ' + data.path, 'ok');
                    analyzeProject();
                }
            } catch (e) {
                // å¦‚æœ API ä¸å¯ç”¨ï¼Œé¡¯ç¤ºæç¤º
                termLog('è«‹ç›´æ¥è¼¸å…¥å®Œæ•´è·¯å¾‘ï¼Œä¾‹å¦‚ï¼šD:\\Projects\\my-app', 'warn');
                alert('è«‹åœ¨å·¦ä¸Šè§’è¼¸å…¥æ¡†ä¸­è¼¸å…¥å®Œæ•´çš„å°ˆæ¡ˆè·¯å¾‘\n\nä¾‹å¦‚ï¼š\nD:\\Projects\\my-website\nC:\\Users\\ä½ çš„åå­—\\Desktop\\my-app');
            }
        }

        // === è¼‰å…¥æˆ‘çš„ç«™é» ===
        async function loadMySites() {
            const list = document.getElementById('sitesList');
            list.innerHTML = '<p style="color: var(--text-muted); font-size: 12px;">è¼‰å…¥ä¸­...</p>';

            try {
                const res = await fetch('/api/list-sites');
                const data = await res.json();

                if (data.success && data.sites && data.sites.length > 0) {
                    list.innerHTML = data.sites.map(site => `
                        <div class="site-card" onclick="window.open('${site.url}', '_blank')">
                            <div class="site-name">ğŸŒ ${site.name}</div>
                            <div class="site-url">${site.url}</div>
                            <div class="site-updated">æ›´æ–°: ${site.updated || 'æœªçŸ¥'}</div>
                        </div>
                    `).join('');
                } else {
                    list.innerHTML = '<p style="color: var(--text-muted); font-size: 12px; text-align: center;">é‚„æ²’æœ‰ç«™é»ï¼Œé–‹å§‹éƒ¨ç½²å§ï¼</p>';
                }
            } catch (e) {
                list.innerHTML = '<p style="color: var(--accent-error); font-size: 12px;">è¼‰å…¥å¤±æ•—</p>';
            }
        }

        // === åˆå§‹åŒ– ===
        function init() {
            const theme = localStorage.getItem('theme') || 'default';
            setTheme(theme);

            const savedProvider = localStorage.getItem('provider') || 'openai';
            selectProvider(savedProvider);

            checkCli();
            loadMySites(); // è‡ªå‹•è¼‰å…¥ç«™é»åˆ—è¡¨
        }

        // ESC é—œé–‰å½ˆå‡ºè¦–çª—
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeTutorial();
                closeInstallGuide();
            }
        });

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
